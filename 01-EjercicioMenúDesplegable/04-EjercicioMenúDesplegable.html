<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú desplegable</title>

    <style type="text/css">
        * {
            margin: 0px;
            padding: 0px;
            text-decoration: none;
            list-style-type: none;
            font-family: sans-serif;

        }

        #menu li a {
            display: block;
            color: black;
            padding: .5em;
        }

        #menu>ul>li>a {
            background: #C8FFAD;
        }

        #menu li ul {
            background: #E4ADFF;
            display: none;
        }

        #menu li.mostrar ul {
            max-height: 500px;
        }
    </style>
</head>

<body>

    <nav id="menu">
        <ul>
            <li>
                <a href="#">Item 1</a>
                <ul>
                    <li><a href="#">Opción 1</a></li>
                    <li><a href="#">Opción 2</a></li>
                    <li class="separador"></li>
                    <li><a href="#">Opción 3</a></li>
                    <li><a href="#">Opción 4</a></li>
                    <li><a href="#">Opción 5</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Item 2</a>
                <ul>
                    <li><a href="#">Opción 1</a></li>
                    <li class="separador"></li>
                    <li><a href="#">Opción 2</a></li>
                    <li><a href="#">Opción 3</a></li>
                    <li><a href="#">Opción 4</a></li>
                    <li><a href="#">Opción 5</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Item 3</a>
                <ul>
                    <li><a href="#">Opción 1</a></li>
                    <li><a href="#">Opción 2</a></li>
                    <li><a href="#">Opción 3</a></li>
                    <li class="separador"></li>
                    <li><a href="#">Opción 4</a></li>
                    <li><a href="#">Opción 5</a></li>
                    <li class="separador"></li>
                    <li><a href="#">Opción 1</a></li>
                    <li><a href="#">Opción 2</a></li>
                    <li><a href="#">Opción 3</a></li>
                </ul>
            </li>


        </ul>

    </nav>


    <script>
        // se trata de crear una función que invoquemos cuando pulsemos en cualquier enlace de primer nivel
        // la función mostrará u ocultará el UL asociado 

        // Lo realizaremos cambiando el estilo directamente con el.style
                window.addEventListener("load", e => {
                const menuPadre = document.querySelectorAll('#menu > ul > li > a');

                menuPadre.forEach(enlace => {
                    enlace.addEventListener('click', muestraOculta)
                });


                function muestraOculta() {
                    const menuHijo = this.parentElement.querySelector('ul');
                        // var menuHijo=nodo.parentNode.getElementsByTagName("ul")[0];
                    if (menuHijo.style.display === 'block') {
                        menuHijo.style.display = 'none';
                    } else {
                        menuHijo.style.display = 'block';
                    }
                };
         })

        //NO ME FUNCIONA ESTE: TENDRÍA QUE SER ACORDEÓN
        // window.addEventListener("load", e => {
        //     //para que no puedas interaccionar con el html hasta que se cargue entero

        //     const encabezados = document.querySelectorAll("#menu>ul>li>a")
        //     console.log(encabezados);

        //     encabezados.forEach(element => {
        //         element.addEventListener('click', despliega)
        //     })

        //     function despliega(e) {
        //         e.preventDefault();
        //         //e.stopPropagation();
        //         const nodo = e.target;
        //         //entre las cosas que le puedes consultar al parámetro, es a qué has hecho click, siempre que hayas capturado el eventlistener
        //         var lipadre = nodo.parentNode;

        //         if (lipadre.classList.contains("mostrar")) {
        //             lipadre.classList.remove("mostrar")
        //         } else {
        //             const mostrados = lipadre.parentNode.getElementsByClassName("mostrar");
        //             for (var i = 0; i < mostrados.length; i++) {
        //                 mostrados[i].classList.remove("mostrar");
        //             }
        //             lipadre.classList.add("mostrar");
        //         }
        //     }
        // })

    </script>

</body>

</html>